(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Profile"],{"1f57":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var r=s("d4ec"),a=s("bee2"),o=s("262e"),n=s("2caf"),i=s("b775"),l=s("3a78"),u="user",c=function(e){Object(o["a"])(s,e);var t=Object(n["a"])(s);function s(){return Object(r["a"])(this,s),t.call(this,u)}return Object(a["a"])(s,[{key:"userUpdate",value:function(e){return Object(i["a"])({url:"".concat(this.apiURL,"/update"),method:"patch",data:e}).then((function(e){return e}))}},{key:"userUpdatePassword",value:function(e){return Object(i["a"])({url:"".concat(this.apiURL,"/password"),method:"patch",data:e}).then((function(e){return e}))}}],[{key:"login",value:function(e){return Object(i["a"])({url:"login",method:"post",data:e}).then((function(e){return e}))}},{key:"registration",value:function(e){return Object(i["a"])({url:"registration",method:"post",data:e}).then((function(e){return e}))}}]),s}(l["a"])},"411c":function(e,t,s){},c66d:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"outer-w3-agile col-xl mt-3"},[s("h4",{staticClass:"tittle-w3-agileits mb-4"},[e._v("Update Profile")]),e.messageDisplay?s("div",{staticClass:"alert",class:[e.isSuccessful?"alert-success":"alert-danger"],attrs:{role:"alert"}},[e._v(" "+e._s(e.messageDisplay)+" ")]):e._e(),s("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleFormControlInput1"}},[e._v("Full Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.fullName,expression:"fullName"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.fullName},on:{input:function(t){t.target.composing||(e.fullName=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleFormControlInput1"}},[e._v("Email")]),s("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:e.getUserEmail}})]),"student"===e.getUserRole?s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleFormControlInput1"}},[e._v("Date of Birth")]),s("date-picker",{ref:"datePicker",attrs:{format:"DD-MM-YYYY","input-class":"form-control",placeholder:"Date of Birth","popup-style":e.popupStype},on:{open:e.datePickerOpen},model:{value:e.dob,callback:function(t){e.dob=t},expression:"dob"}})],1):e._e(),s("button",{staticClass:"btn btn-primary mt-3",attrs:{type:"submit"}},[e._v("Update")])])])]),s("div",{staticClass:"row"},[s("password-form")],1)])},a=[],o=s("5530"),n=s("1da1"),i=(s("96cf"),s("1f57")),l=s("f040"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"outer-w3-agile col-xl mt-3"},[s("h4",{staticClass:"tittle-w3-agileits mb-4"},[e._v("Change Password")]),e.messageDisplay?s("div",{staticClass:"alert",class:[e.isSuccessful?"alert-success":"alert-danger"],attrs:{role:"alert"}},[e._v(" "+e._s(e.messageDisplay)+" ")]):e._e(),s("form",{on:{submit:function(t){return t.preventDefault(),e.formSubmit(t)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleFormControlInput1"}},[e._v("Current Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.currentPassword,expression:"currentPassword"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:e.currentPassword},on:{input:function(t){t.target.composing||(e.currentPassword=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleFormControlInput1"}},[e._v("New Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:e.newPassword},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleFormControlInput1"}},[e._v("Confirm Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:e.confirmPassword},on:{input:function(t){t.target.composing||(e.confirmPassword=t.target.value)}}})]),s("button",{staticClass:"btn btn-primary mt-3",attrs:{type:"submit"}},[e._v("Confirm")])])])},c=[],m={name:"PasswordForm",mixins:[l["a"]],data:function(){return{UserService:new i["a"],currentPassword:"",newPassword:"",confirmPassword:""}},formFields:["currentPassword","newPassword","confirmPassword"],methods:{formSubmit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.UserService.userUpdatePassword(e.formData);case 3:e.resetAll(),e.showMessage({success:!0,message:"Password successfully updated."}),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.showMessage({message:null!==(s=null===t.t0||void 0===t.t0||null===(r=t.t0.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)&&void 0!==s?s:"Something Wrong!!!"});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},d=m,p=s("2877"),f=Object(p["a"])(d,u,c,!1,null,null,null),v=f.exports,g=s("ec45"),w=s("2f62"),h=(s("411c"),{name:"Profile",mixins:[l["a"]],components:{DatePicker:g["default"],PasswordForm:v},data:function(){return{UserService:new i["a"],fullName:"",dob:"",popupStype:{}}},formFields:["fullName","dob"],mounted:function(){this.fullName=this.getUserFullName,this.email=this.getUserEmail,"student"===this.getUserRole&&(this.dob=new Date(this.getUserDob))},methods:{formSubmit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.fullName!==e.getUserFullName||e.dob!==e.getUserDob){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.UserService.userUpdate(e.formData);case 5:e.$store.dispatch("user/updateUserData",e.formData),e.showMessage({success:!0,message:"Successfully updated."}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),e.showMessage({message:null!==(s=null===t.t0||void 0===t.t0||null===(r=t.t0.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)&&void 0!==s?s:"Something Wrong!!!"});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},datePickerOpen:function(){var e=this.$refs.datePicker.$el.getBoundingClientRect(),t=e.left;this.popupStype={left:"".concat(t,"px")}}},computed:Object(o["a"])({},Object(w["b"])("user",["getUserFullName","getUserEmail","getUserDob","getUserRole"]))}),b=h,P=Object(p["a"])(b,r,a,!1,null,null,null);t["default"]=P.exports},f040:function(e,t,s){"use strict";s("159b");var r={data:function(){return{isSuccessful:!1,messageDisplay:"",timer:null,success:!1}},methods:{showMessage:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.isSuccessful=e.success,this.messageDisplay=e.message;var r=e.ref;r&&(this.$refs[r].style.display="block"),clearTimeout(this.timer),this.timer=setTimeout((function(){t.isSuccessful=!1,t.messageDisplay="",r&&(t.$refs[r].style.display="none")}),s)},resetAll:function(){var e=this;this.$options.formFields.forEach((function(t){e.$data[t]=""}))}},computed:{formData:function(){var e=this,t={};return this.$options.formFields.forEach((function(s){e.$data[s]&&(t[s]=e.$data[s])})),t}}};t["a"]=r}}]);
//# sourceMappingURL=Profile.9ef82926.js.map